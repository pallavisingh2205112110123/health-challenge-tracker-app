<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Health Challenge Tracker Page</title>
    <style>
        .form-control {
            border: 1px solid black !important;
        }

        .rounded-btn {
            border-radius: 20px;
        }
    </style>
    <script>
        var totitems = [
            { item: 'Market', tags: ['general', 'market'] },
            { item: 'Scrum Meeting', tags: ["meeting", "calls"] },
            { item: 'Interview', tags: ["calls"] }, { item: 'Scrum Ticket', tags: ["work", "defect"] },
            { item: 'Wpork On defect', tags: ["defect"] }
        ];
        var myString = "work,defect";
        var arrr = ['defect', 'calls']; 
        const myArrayFiltered = totitems.filter((el) => {
            return arrr.some((f) => {
                return el.tags.includes(f);
            });
        }); 
        console.log(myArrayFiltered);
        debugger;

    </script>
</head>

<body>
    
    <div class="container pt-3">
        <div class="mt-2 p-1 bg-primary text-white rounded text-center">
            <h1>Health Challenge Tracker App</h1>
            <p>Advance Version With Filter </p>
          </div>
          <div class="row">
            <div class="col-5 pt-2">
              <h6>User Name*</h6> 
                <input type="text" class="form-control" [(ngModel)]="taskObj.taskName" placeholder="User Name" style="width: 400px; height: 50px;">
            </div>
        </div>
        <form>
          <div class="row">
            <div class="col-5 pt-4">
              <h6>Workout Type*</h6>
          <div class="col-5 pt-1">
          <select id="workoutType" name="workoutType" style="width: 400px; height: 50px;" [(ngModel)]="taskObj.taskDescription" (change)="filterTasks()">
              <option value="running">Running</option>
              <option value="cycling">Cycling</option>
              <option value="swimming">Swimming</option>
              <option value="yoga">Yoga</option>
              <option value="weightlifting">Weightlifting</option>
              <option value="Running, Cycling">Running, Cycling</option>
              <option value="Running, Swimming">Running, Swimming</option>
              <option value="Running, Yoga">Running, Yoga</option>
              <option value="Running, Weightlifting">Running, Weightlifting</option>
              <option value="Cycling, Swimming">Cycling, Swimming</option>
              <option value="Cycling, Yoga">Cycling, Yoga</option>
              <option value="Cycling, Weightlifting">Cycling, Weightlifting</option>
              <option value="Swimming, Yoga">Swimming, Yoga</option>
              <option value="Swimming, Weightlifting">Swimming, Weightlifting</option>
              <option value="Yoga, Weightlifting">Yoga, Weightlifting</option>
              <option value="Running, Cycling, Swimming">Running, Cycling, Swimming</option>
              <option value="Running, Cycling, Yoga">Running, Cycling, Yoga</option>
              <option value="Running, Cycling, Weightlifting">Running, Cycling, Weightlifting</option>
              <option value="Running, Swimming, Yoga">Running, Swimming, Yoga</option>
              <option value="Running, Swimming, Weightlifting">Running, Swimming, Weightlifting</option>
              <option value="Running, Yoga, Weightlifting">Running, Yoga, Weightlifting</option>
              <option value="Cycling, Swimming, Yoga">Cycling, Swimming, Yoga</option>
              <option value="Cycling, Swimming, Weightlifting">Cycling, Swimming, Weightlifting</option>
              <option value="Cycling, Yoga, Weightlifting">Cycling, Yoga, Weightlifting</option>
              <option value="Swimming, Yoga, Weightlifting">Swimming, Yoga, Weightlifting</option>
              <option value="Running, Cycling, Swimming, Yoga">Running, Cycling, Swimming, Yoga</option>
              <option value="Running, Cycling, Swimming, Weightlifting">Running, Cycling, Swimming, Weightlifting</option>
              <option value="Cycling, Swimming, Yoga, Weightlifting">Cycling, Swimming, Yoga, Weightlifting</option>
              <option value="Running, Swimming, Yoga, Weightlifting">Running, Swimming, Yoga, Weightlifting</option>
              <option value="Running, Cycling, Yoga, Weightlifting">Running, Cycling, Yoga, Weightlifting</option>
              <option value="Running, Cycling, Swimming, Yoga, Weightlifting">Running, Cycling, Swimming, Yoga, Weightlifting</option>
          </select>
          </div>
            </div>
          </div>
      </form>
        <div class="row pt-4">
            <div class="col-2">
              <h6>Due Date</h6>
                <input type="date" id="textDate" class="form-control" [(ngModel)]="taskObj.dueDate" placeholder="Due Date" style="width: 400px; height: 50px;">
            </div>
        
        
            <div class="col-7">
              <h6 style="margin-left: 200px;">Workout Minutes*</h6>
                <input type="text" [(ngModel)]="taskObj.tags" placeholder="Workout Minutes" class="form-control" style="width: 400px; height: 50px; margin-left: 200px;">
            </div>
        
            <div class="col-8 pt-4">
                @if (taskObj.itemId == 0) {
                <button class="btn btn-success" style="margin-right: 20px;" (click)="addTask()">Add Workout</button>
                } @else {
                <button class="btn btn-warning" style="margin-right: 20px;" (click)="updateTask()">Update</button>
                }
            </div>
        </div>
        <div class="row pt-5">
            <div style="display: flex; justify-content: space-between;">
              <div class="col-5">
            <h6>Search</h6>
             <input type="text" placeholder="Search" class="form-control"  [(ngModel)]="searchTerm" (ngModelChange)="filterTasks()" style="width: 550px; height: 50px;  margin-right: -20px;">
             </div>
        <form>
               <div class="col-5">
              <h6 style="margin-left: -50px;">Filter by Workout Type</h6>
              <select id="workoutType" name="workoutType" style=" width: 550px; height: 50px; margin-left: -50px;" [(ngModel)]="filterWorkoutType" (change)="filterTasks()">
                <option value="running">All</option>
                <option value="cycling">Running</option>
                <option value="cycling">Cycling</option>
                <option value="swimming">Swimming</option>
                <option value="yoga">Yoga</option>
                <option value="weightlifting">Weightlifting</option>
                <option value="Running, Cycling">Running, Cycling</option>
              <option value="Running, Swimming">Running, Swimming</option>
              <option value="Running, Yoga">Running, Yoga</option>
              <option value="Running, Weightlifting">Running, Weightlifting</option>
              <option value="Cycling, Swimming">Cycling, Swimming</option>
              <option value="Cycling, Yoga">Cycling, Yoga</option>
              <option value="Cycling, Weightlifting">Cycling, Weightlifting</option>
              <option value="Swimming, Yoga">Swimming, Yoga</option>
              <option value="Swimming, Weightlifting">Swimming, Weightlifting</option>
              <option value="Yoga, Weightlifting">Yoga, Weightlifting</option>
              <option value="Running, Cycling, Swimming">Running, Cycling, Swimming</option>
              <option value="Running, Cycling, Yoga">Running, Cycling, Yoga</option>
              <option value="Running, Cycling, Weightlifting">Running, Cycling, Weightlifting</option>
              <option value="Running, Swimming, Yoga">Running, Swimming, Yoga</option>
              <option value="Running, Swimming, Weightlifting">Running, Swimming, Weightlifting</option>
              <option value="Running, Yoga, Weightlifting">Running, Yoga, Weightlifting</option>
              <option value="Cycling, Swimming, Yoga">Cycling, Swimming, Yoga</option>
              <option value="Cycling, Swimming, Weightlifting">Cycling, Swimming, Weightlifting</option>
              <option value="Cycling, Yoga, Weightlifting">Cycling, Yoga, Weightlifting</option>
              <option value="Swimming, Yoga, Weightlifting">Swimming, Yoga, Weightlifting</option>
              <option value="Running, Cycling, Swimming, Yoga">Running, Cycling, Swimming, Yoga</option>
              <option value="Running, Cycling, Swimming, Weightlifting">Running, Cycling, Swimming, Weightlifting</option>
              <option value="Cycling, Swimming, Yoga, Weightlifting">Cycling, Swimming, Yoga, Weightlifting</option>
              <option value="Running, Swimming, Yoga, Weightlifting">Running, Swimming, Yoga, Weightlifting</option>
              <option value="Running, Cycling, Yoga, Weightlifting">Running, Cycling, Yoga, Weightlifting</option>
              <option value="Running, Cycling, Swimming, Yoga, Weightlifting">Running, Cycling, Swimming, Yoga, Weightlifting</option>
              </select>
              </div>
        </form>
        </div>
        </div>
        
        
        <div class="row pt-5">
            <div class="col-12">
                <table class="table table-bordered table-striped table-sm">
                    <thead>
                        <tr>
                            <th style="width: 150px;"><strong>Index</strong></th>
                            <th style="width: 200px;"><strong>Name</strong></th>
                            <th style="width: 200px;"><strong>Due Date</strong></th>
                            <th style="width: 200px;"><strong>Tags</strong></th>
                            <th style="width: 200px;"><strong>Workouts</strong></th>
                            <th style="width: 200px;"><strong>Total Workout Minutes</strong></th>
                            
                        </tr>
                    </thead>
                    <tbody>
                        @for (item of filteredTasks | paginate: { itemsPerPage: itemsPerPage, currentPage: p }; track 'itemId') { 

                            <tr>
                                <td style="text-align: left;">{{$index+1 + (p - 1) * itemsPerPage}}</td>
                               
                            
                            <td>
                                <div class="row">
                                    
                                    <div class="col-6">
                                        {{item.taskName}}
                                    </div>
                                    
                                </div>
                            </td>

                            <td>{{item.dueDate |date:'dd-MM-yyyy'}}</td>
                            <td class="text-center">
                                <button class="btn btn-warning btn-sm rounded-btn" (click)="onEdit(item)">Edit</button>
                                <button class="btn btn-danger btn-sm rounded-btn" (click)="onDelete(item.itemId)">Delete</button>
                            </td>   

                            <td>
                                <div class="row">
                                    
                                    <div class="col-6">
                                        {{item.taskDescription}}
                                    </div>
                                    
                                </div>
                            </td>

                            <td>
                                <div class="row">
                                    
                                    <div class="col-6">
                                        {{item.tags}}
                                    </div>
                                    
                                </div>
                            </td>

                        </tr>
                        
                        } 

                    </tbody>
                </table>
                <pagination-controls (pageChange)="p = $event"></pagination-controls>
            </div>

        </div>
    </div>

</body>

</html>